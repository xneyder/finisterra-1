aws_iam_role:
  # terraform_module: "../../../terraform-aws-modules/terraform-aws-iam//modules/iam_role"
  terraform_module: "github.com/finisterra-io/terraform-aws-iam//modules/iam_role?ref=main"
  terraform_module_version: "5.2.0"
  target_resource_name: default
  name_field: role_name
  # path: "roles"
  dependencies:
    - "../iam_policy"
  defaults:
    instance_profile_enabled: false
  fields:
    role_name:
      field: name
      type: string
    assume_role_policy:
      field: assume_role_policy
      type: string
      multiline: true
    role_description:
      field: description
      type: string
    max_session_duration:
      field: max_session_duration
      type: number
    inline_policies:
      field: inline_policy
      type: list
    permissions_boundary:
      field: permissions_boundary
      type: string
    path:
      field: path
      type: string
    tags:
      field: tags
      type: map
    managed_policy_arns:
      field: managed_policy_arns
      type: list
  childs:
    aws_iam_instance_profile:
      join:
        name:
          field: role
      defaults:
        instance_profile_enabled: false
      fields:
        instance_profile_name:
          field: name
          type: string
